<!doctype html>
<html class="no-js layout__7" lang="zxx">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Laaver</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="shortcut icon" type="image/x-icon" href="images/favicon.ico">
    <!-- Place favicon.ico in the root directory -->

        <!-- CSS here -->
        <link rel="stylesheet" href="css/bootstrap.min.css">
        <link rel="stylesheet" href="css/animate.min.css">
        <link rel="stylesheet" href="css/magnific-popup.css">
        <link rel="stylesheet" href="css/all.min.css">
        <link rel="stylesheet" href="css/futura-std-4.css">
        <link rel="stylesheet" href="css/slick.css">
        <link rel="stylesheet" href="css/style.css">

		<script src="javascript/header_footer.js "></script>
</head>


<body>


    <main class="main_wrapper body__overlay overflow__hidden">

		<%- include('./header.ejs') %>   

		<!-- login__section__start -->
		<div class="loginarea  sp_bottom_80 sp_top_80">
		 <div class="container">
			<div class="row">
				<div class="tab-content tab__content__wrapper">

					<div class="tab-pane fade active show" id="projects__two" role="tabpanel" aria-labelledby="projects__two">
					  <div class="col-xl-8 offset-md-2 loginarea__col">
						<div class="loginarea__wraper">
						  <div class="log-in-title"> 
							<h3 id="reset_title">Passwort zurücksetzen</h3><br/>
						  </div>
						  <div class="login-box"> 
							<form class="row g-4">
							  <div class="col-12">
								<div class="form-floating theme-form-floating log-in-form">
								  <input type="password" class="form-control" id="password" placeholder="Passwort" autocomplete='off'>
								  <label for="password" id="reset_label_password">Passwort</label>
								</div>
							  </div>
							  
							  <div class="col-12">
								<div class="form-floating theme-form-floating log-in-form">
								  <input type="password" class="form-control" id="password_wiederholen" placeholder="Passwort" autocomplete='off'>
								  <label for="password_wiederholen" id="reset_label_password_repeat">Passwort Wiederholen</label>
								</div>
							  </div>													

							  <div class="col-12">
								<button class="btn login btn_black sm" type="button" id="reset_button_submit" style="border: 1px solid #212529;" onclick="checkPasswortInfo()">Passwort zurücksetzen</button>
							  </div>
							</form>
						  </div>
						</div>
					  </div>
					</div>
				</div>
			</div>
		</div>
		</div>
		
		<!-- Hinweisen Modal Start -->
		<div class="modal fade theme-modal deal-modal" id="HinweisenModalFade" tabindex="-1">
			<div class="modal-dialog modal-dialog-centered modal-fullscreen-sm-down">
				<div class="modal-content">
					<div class="modal-header">
						<div>
							<h5 class="modal-title w-100" id="HinweisenModalTitle"></h5>
						</div>
						<button type="button" class="btn-close" data-bs-dismiss="modal" id="HinweisenModalButton1"></button>
					</div>
					<div class="modal-body">
						<div id="HinweisenModalInhalt" style="font-size:16px;margin:5px 5px 20px 5px;"></div>					
						<div>
							<button class="btn btn-md fw-bold mt-md-4 mt-2 mend-auto" id="HinweisenModalButton2" style="width:100%;" data-bs-dismiss="modal">
								<span id="modal_button_close">Schließen</span>
							</button>
						</div>
					</div>

				</div>
			</div>
		</div>
		<!-- Hinweisen Modal End -->



	    <%- include('./footer.ejs') %>     

	</main>

	<script>
		languageInnerHTMLArr.push(new languageObj("reset_title", "Reset Password", "Passwort zurücksetzen", "Réinitialiser le mot de passe", "重置密码"));
		languageInnerHTMLArr.push(new languageObj("reset_label_password", "Password", "Passwort", "Mot de passe", "密码"));
		languageInnerHTMLArr.push(new languageObj("reset_label_password_repeat", "Repeat Password", "Passwort Wiederholen", "Répéter le mot de passe", "重复密码"));
		languageInnerHTMLArr.push(new languageObj("reset_button_submit", "Reset Password", "Passwort zurücksetzen", "Réinitialiser le mot de passe", "重置密码"));
		languagePlaceholderArr.push(new languageObj("password", "Password", "Passwort", "Mot de passe", "密码"));
		languagePlaceholderArr.push(new languageObj("password_wiederholen", "Repeat Password", "Passwort Wiederholen", "Répéter le mot de passe", "重复密码"));



	</script>

    <!-- JS here -->
    <script src="js/vendor/modernizr-3.5.0.min.js "></script>
    <script src="js/vendor/jquery-3.6.0.min.js "></script>
	
	<script>		
	var EmailCode="";
	if(String(GetQueryString("EmailCode"))!="" && String(GetQueryString("EmailCode"))!="null" && String(GetQueryString("EmailCode"))!="undefined") EmailCode = escape(GetQueryString("EmailCode"));
	
	function checkPasswortInfo(){
		var password = escape(escape(document.getElementById("password").value));
		var password_wiederholen = escape(escape(document.getElementById("password_wiederholen").value));
		
		var bool=true;
		if(password=="" || password!=password_wiederholen){
			alert("falsches Passwort!"); bool=false;
		}
	
		if(EmailCode!="" && bool){
			$.ajax({
				type: "POST",
				url: "/frontend_passwort_forgot_2",
				contentType: 'application/x-www-form-urlencoded',
				data: {
					password: password,
					EmailCode: EmailCode
				},
				cache: false,
				success: function (response) {
					document.getElementById("HinweisenModalInhalt").innerHTML = "Dein Passwort wurde erfolgreich zurückgesetzt, bitte melde dich erneut an.";
					document.getElementById("HinweisenModalTitle").style.color = "#0da487";
					document.getElementById("HinweisenModalButton1").style.backgroundColor = "#0da487";
					document.getElementById("HinweisenModalButton2").style.backgroundColor = "#0da487";			
					$('#HinweisenModalFade').modal('show');	
					
					setTimeout(function(){window.location.href="/login";},2000);
				},
				error: function (xhr, status, error) {
					console.error("AJAX Fehler:", status, error);
				}
			});
		}
	}
	
	function GetQueryString(string){
	   var reg = new RegExp('(^|&)'+ string +'=([^&]*)(&|$)');
	   var r = window.location.search.substr(1).match(reg);
	   if(r!=null)return unescape(r[2]); return null;
	}
	</script>	
	
    <script src="js/popper.min.js "></script>
    <script src="js/bootstrap.min.js "></script>
    <script src="js/isotope.pkgd.min.js "></script>
    <script src="js/one-page-nav-min.js "></script>
    <script src="js/slick.min.js "></script>
    <script src="js/jquery.meanmenu.min.js "></script>
    <script src="js/ajax-form.js "></script>
    <script src="js/wow.min.js "></script>
    <script src="js/jquery.scrollUp.min.js "></script>
    <script src="js/imagesloaded.pkgd.min.js "></script>
    <script src="js/jquery.magnific-popup.min.js "></script>
    <script src="js/waypoints.min.js "></script>
    <script src="js/jquery.counterup.min.js "></script>
    <script src="js/fontawesome.min.js "></script>
    <script src="js/plugins.js "></script>
    <script src="js/main.js "></script>
	

</body>

</html>